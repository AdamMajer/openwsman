
# swap uuid value and increment stored id
export inc=`cat $1/increment.txt`
sed -e s/---incr---/${inc}/ < $1/pre_input.txt > $1/input.txt
expr ${inc} + 1 > $1/increment.txt

# run test
/usr/java/jdk1.5.0_08/bin/java -cp $2/etc/tools/tools.jar otm.httpslinger.HttpSlinger --url 143.166.157.213 --port 8889 --username wsman --password secret --servlet wsman --file $1/input.txt --striphttp > $1/output.txt

# create request as a separate output file.
#head -n `grep -n '</s:Envelope' request_response.tmp | cut -f1 -d: | head -n 1` request_response.tmp > request.tmp

# return 1 for pass return 0 for fail
/usr/java/jdk1.5.0_08/bin/java -cp $2/etc/tools/tools.jar otm.xml.XMLDiff --file1 $1/output.txt --file2 $1/expected-output.txt --ignorelist /s:Envelope/s:Body/p:OpenWBEM_UnitaryComputerSystem/p:Name,/s:Envelope/s:Header/wsa:RelatesTo,/s:Envelope/s:Header/wsa:MessageID

